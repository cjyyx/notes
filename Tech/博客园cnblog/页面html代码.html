<script src="https://blog-static.cnblogs.com/files/guangzan/loader.min.js"></script>

<script>
    const config = {
        // åœ¨è¿™é‡Œæ·»åŠ è‡ªå®šä¹‰é…ç½®
        theme: {
            name: 'geek',
            avatar: 'https://pic.cnblogs.com/avatar/3281293/20230917165414.png',
            // avatar: 'https://pic1.zhimg.com/v2-abed1a8c04700ba7d72b45195223e0ff_l.jpeg',
            // headerBackground:'https://images.cnblogs.com/cnblogs_com/guangzan/1894231/o_201205070714banner1.jpg',
            headerBackground:'https://picx.zhimg.com/v2-51c6c632e5e600eac56076f4406e9967_1440w.jpg?source=32738c0c',
        },
        github: {
            enable: true,
            color: '#ffb3cc',
            url: 'https://github.com/cjyyx',
        },
        signature: {
            enable: true,
            contents: [
                "This theme is built with <b style='color:#ff6b81'>awescnb</b>.",
                "<b>console.log(ğŸº);</b>",
            ],
        },
        imagebox: {
            enable: false,
        },
        click: {
            enable: true,
            auto: false,
            colors: ['#FF1461', '#18FF92', '#5A87FF', '#FBF38C'],
            size: 10,
            maxCount: 30,
        },
        postSignature: {
            enable: false,
            enableLicense: false,
            licenseName: '',
            licenseLink: '',
        },

    }
    $.awesCnb(config)

    /* 
    å›¾ç‰‡å¤„ç†ï¼š

    1. é¦–å…ˆç¼©å°ä¸ºåŸæ¥çš„ k1
    2. å¦‚æœå¤„äºpcç«¯ï¼Œå®½é«˜æ¯”ä¸å¤§ï¼Œä¸”å®½åº¦å¤§äºæ®µè½å®½åº¦çš„ k2ï¼Œåˆ™è®¾ç½®ä¸ºæ®µè½å®½åº¦çš„ k2
    
    */

    var k1 = 0.5;
    var k2 = 0.8;

    function isDesktop() {
        const width = window.innerWidth;
        const height = window.innerHeight;

        // åˆ¤æ–­ç•Œé¢å°ºå¯¸æ¯”ä¾‹
        const aspectRatio = width / height;

        // è®¤ä¸ºå®½é«˜æ¯”å°äº1æ˜¯çºµå‘ï¼ˆç§»åŠ¨è®¾å¤‡ï¼‰ï¼Œå®½é«˜æ¯”å¤§äº1æ˜¯æ¨ªå‘ï¼ˆæ¡Œé¢è®¾å¤‡ï¼‰
        return aspectRatio > 1;
    }

    document.addEventListener("DOMContentLoaded", function () {
        setTimeout(function () {

            // è·å–idä¸ºcnblogs_post_bodyçš„div
            var postBody = document.getElementById('cnblogs_post_body');
            if (postBody) {
                // è·å–divå†…æ‰€æœ‰çš„imgå…ƒç´ 
                var images = postBody.getElementsByTagName('img');
                // éå†æ¯ä¸ªimgå…ƒç´ 
                for (var i = 0; i < images.length; i++) {
                    var img = images[i];

                    // ç¡®ä¿åœ¨å›¾ç‰‡åŠ è½½å®Œæˆåæ‰§è¡Œ
                    img.addEventListener('load', function () {

                        // è·å–å›¾ç‰‡çš„åŸå§‹å®½åº¦å’Œé«˜åº¦
                        var originalWidth = img.naturalWidth;
                        var originalHeight = img.naturalHeight;

                        // å°†å›¾ç‰‡ç¼©å°ä¸ºåŸæ¥çš„ k1
                        img.width = originalWidth * k1;
                        img.height = originalHeight * k1;

                        // è·å–ç¼©å°åçš„imgå®½åº¦å’Œçˆ¶æ®µè½çš„å®½åº¦
                        var parentParagraph = img.parentElement;
                        var parentWidth = parentParagraph.clientWidth;

                        if (isDesktop()) {
                            if (img.width / img.height < 2.2) {

                                // åˆ¤æ–­ç¼©å°åçš„imgå®½åº¦æ˜¯å¦ä»ç„¶å¤§äºæ®µè½å®½åº¦çš„ k2
                                if (img.width > parentWidth * k2) {
                                    // console.log('resize');
                                    // è®¾ç½®imgå®½åº¦ä¸ºæ®µè½å®½åº¦çš„ k2
                                    img.style.width = k2 * 100 + '%';
                                    img.style.height = 'auto';  // ä¿æŒçºµæ¨ªæ¯”
                                }
                                
                                // console.log("å›¾ç‰‡" + i + "å¤„ç†å®Œæˆ");
                            }
                        }

                        if (img.width < parentWidth * 0.2) {
                            img.style.width = '20%';
                            img.style.height = 'auto';
                        }
                    });

                    // å¦‚æœå›¾ç‰‡å·²ç»åŠ è½½ï¼Œåˆ™ç«‹å³è§¦å‘loadäº‹ä»¶å¤„ç†
                    if (img.complete) {
                        img.dispatchEvent(new Event('load'));
                    }
                }
            }
        }, 1000); // å»¶è¿Ÿ1ç§’æ‰§è¡Œ
    });



</script>