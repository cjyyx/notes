# 正运动学

## 串联机构中的运动学参量

从串联机器人进行编号

- 固定基座为连杆0
- 第一个可动连杆为连杆1
- 以此类推，机器人最末端的连杆为连杆$N$
- 连杆0 与连杆1 通过关节1 连接，… ，连杆$N-1$ 与连杆$N$ 通过关节$N$ 连接

为了确定末端执行器在3 维空间的位置和姿态，串联机器人至少需要6个关节

**关节轴线**

- 用空间中的直线“轴$i$ ”表示关节$i$ 的轴线
- 轴$i$ 的正方向由设计者指定
- 旋转关节：旋转轴中心线
- 滑动关节：滑动方向中心线
- 连杆$i$ 绕（沿）轴$i$ 相对于连杆$i–1$ 运动

**D-H 参数**：运动学参量

若轴$i-1$ 和轴$i$ 不平行，它们有唯一的公垂线段；若轴$i-1$ 和轴$i$ 平行，它们的公垂线段不唯一，可按需取一条公垂线段。公垂线段$\overrightarrow{O_{i-1}P_i}$ 的正方向为轴$i-1$ 指向轴$i$，称$\overrightarrow{O_{i-1}P_i}$ 为**几何连杆**。

公垂线段$\overrightarrow{O_{i-1}P_i}$ 的长度，表示为**连杆长度** $a_{i-1}$。当$a_{i-1}=0$ 时，我们并不将零长度的$\overrightarrow{O_{i-1}P_i}$ 视为传统的零向量，而是在与轴$i-1$和轴$i$同时垂直的方向中选一个作为$\overrightarrow{O_{i-1}P_i}$ 的正方向。

过轴$i-1$ 作一个平面垂直于$\overrightarrow{O_{i-1}P_i}$，然后将轴$i$ 投影到该平面上，按照轴$i-1$ 绕$\overrightarrow{O_{i-1}P_i}$ 旋转到轴$i$ 投影的思路以右手螺旋法则确定轴$i-1$ 与轴$i$ 夹角的值，此夹角即为**连杆转角** $\alpha_{i-1}$。

从$P_i$ 到$O_i$ 的有向距离，记为**连杆偏距** $d_i$

过$\overrightarrow{O_{i-1}P_i}$ 作一个平面垂直于轴$i$ ，然后将$\overrightarrow{O_iP_{i+1}}$ 投影到该平面上，在平面内 
按照$\overrightarrow{O_{i-1}P_i}$ 绕轴$i$ 旋转到$\overrightarrow{O_iP_{i+1}}$ 投影的思路以右手螺旋法则确定$\overrightarrow{O_{i-1}P_i}$ 与$\overrightarrow{O_iP_{i+1}}$ 夹角的值，此旋转角度即为**关节角** $\theta_i$

![](PasteImage/2024-03-08-09-29-29.png)

**关节1 的运动学参量（首关节约定）**

设定一个虚拟的轴0与轴1重合，即取 $a_0=0,\alpha_0=0$。

若关节1是转动关节，取$d_1=0$，而$\overrightarrow{O_0P_1}$ 的方向则任取与轴1垂直的某个方向，取$\overrightarrow{O_0P_1}$ 的方向就是决定$\overrightarrow{O_1P_2}$ 的零位方向。

若关节1是滑动关节，取$\theta_1{=}0$，而$\overrightarrow{O_0P_1}$ 的位置则任取轴1上的某个点，取$\overrightarrow{O_0P_1}$ 的位置就是决定$\overrightarrow{O_1P_2}$ 的零位位置。

$\overrightarrow{O_0P_1}$ 是一个固定不动的几何连杆。

**关节N 的运动学参量（尾关节约定）**

轴$N-1$ 和轴$N$ 存在，$a_{N-1}$ 和$\alpha_{N-1}$ 已知，需要选取长度任意的$\overrightarrow{O_N P_{N+1}}$。

若关节$N$ 是转动关节，取$d_{N}=0$，而$\overrightarrow{O_N P_{N+1}}$ 的方向则任取与连杆$N$ 固连的某个方向，$\overrightarrow{O_N P_{N+1}}$ 与 $\overrightarrow{O_{N-1} P_{N}}$ 的夹角即是关节角 $\theta_N$。

若关节$N$ 是滑动关节，取$\theta_{N}=0$，而点$O_N$ 则任取轴$N$ 上与连杆$N$ 固连的某个点，$O_N$ 与$P_N$ 的相对位移即决定了连杆偏距$d_{N}$。


## 建立坐标系的改进D-H方法

**运动学参量表**

$a_{i-1}$和$\alpha_{i-1}$是固定不变的参数，不会随着关节$i$的运动而变化。

若关节$i$是转动关节，则$d_i$是固定不变的参数，$\theta_i$是会随着关节$i$的运动而变化的关节变量，即：3个连杆参数$a_{i-1},\alpha_{i-1},d_i$ 1个关节变量$\theta_i$

若关节$i$是滑动关节，则$\theta_i$是固定不变的参数，$d_i$是会随着关节$i$的运动而变化的关节变量，即：3个连杆参数$a_{i-1},\alpha_{i-1},\theta_i$ 1个关节变量$d_i$

一个有$N$个关节的串联机构，有$4N$个运动学参量，其中$3N$ 个是连杆参数、$N$个是关节变量，它们包含了串联机构的全部空间几何信息。


**连杆联体坐标系的配置**

串联机器人是一个多体系统（$N+1$ 个刚体），描述机器人的运动即是描述$N+1$ 个刚体的运动，因此需要建立每个刚体（实物连杆）的联体坐标系。

几何连杆 $\overrightarrow{O_{i-1} P_i}$ 与连杆$i-1$ 固连，$\overrightarrow{O_{i-1}P_i}$ 的联体坐标系也是连杆$i-1$ 的联体坐标系。

建立连杆$i-1$ 的联体坐标系$\{i-1\}$

- $O_{i-1}$为$\{i-1\}$的原点
- 轴$i-1$为$\{i-1\}$的Z轴
- $\overrightarrow{O_{i-1}P_i}$为$\{i-1\}$的X轴
- 右手定则定$\{i-1\}$的Y轴

## 机器人的正运动学计算

相邻连杆联体坐标系的变换

$$
\begin{aligned}
{}_{i}^{i-1}T &=\left[\begin{array}{c:c}
R_{x}(\alpha_{i-1}) & 0\\
\hdashline 0 & 1
\end{array}\right] \left[\begin{array}{ccc:c}
1 & 0 & 0 & a_{i-1} \\
0 & 1 & 0 & 0 \\
0 & 0 & 1 & 0 \\
\hdashline 0 & 0 & 0 & 1
\end{array}\right] \left[\begin{array}{c:c}
R_{z}(\theta_{i}) & 0\\
\hdashline 0 & 1
\end{array}\right] \left[\begin{array}{ccc:c}
1 & 0 & 0 & 0 \\
0 & 1 & 0 & 0 \\
0 & 0 & 1 & d_i \\
\hdashline 0 & 0 & 0 & 1
\end{array}\right] \\
&=\left[\begin{array}{cccc}
\cos \theta_{i} & -\sin \theta_{i} & 0 & a_{i-1} \\
\sin \theta_{i} \cos \alpha_{i-1} & \cos \theta_{i} \cos \alpha_{i-1} & -\sin \alpha_{i-1} & -\sin \alpha_{i-1} d_{i} \\
\sin \theta_{i} \sin \alpha_{i-1} & \cos \theta_{i} \sin \alpha_{i-1} & \cos \alpha_{i-1} & \cos \alpha_{i-1} d_{i} \\
0 & 0 & 0 & 1
\end{array}\right]
\end{aligned}
$$

对于具有N个关节的串联机器人，其N个关节变量可形成一个N×1的**关节矢量**。所有关节矢量构成的空间称为**关节空间**。关节空间中的每一个关节矢量都确定了机器人的一个**位形**。

正运动学：关节空间 → 笛卡尔空间

# 逆运动学

- **工作空间**是机器人末端工具联体坐标系原点所能到达的范围；
- **灵巧工作空间**：机器人末端工具能够以任何姿态到达的区域；
- **可达工作空间**：机器人末端工具以至少一种姿态到达的区域；
- 灵巧工作空间是可达工作空间的子集；
- 若目标位置在灵巧工作空间内，则逆运动学问题的解存在；
- 若目标位置不在可达工作空间内，则逆运动学问题的解不存在；
- 当操作臂少于6自由度时，它在三维空间内不能达到全部位姿。

关于运动学逆解的几个结论

- 所有包含转动关节和移动关节的串联型6自由度操作臂都是可解的，但这种解一般是数值解
- 对于6自由度操作臂来说，只有在特殊情况下才有解析解。这种存在解析解（封闭解）的操作臂具有如下特性：存在几个正交关节轴或者有多个 $\alpha_i$ 为0 或$\pm90^\circ$
- 具有6个旋转关节的操作臂存在封闭解的充分条件是相邻的三个关节轴线相交于一点

## 简单的平面三连杆操作臂

![](PasteImage/2024-03-15-08-30-49.png)

## 三轴相交的 PIEPER 解法

![](PasteImage/2024-03-15-08-33-34.png)








