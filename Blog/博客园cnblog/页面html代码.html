<script src="https://blog-static.cnblogs.com/files/guangzan/loader.min.js"></script>

<script>
    const config = {
        // åœ¨è¿™é‡Œæ·»åŠ è‡ªå®šä¹‰é…ç½®
        theme: {
            name: 'geek',
            avatar: 'https://pic.cnblogs.com/avatar/3281293/20230917165414.png',

        },
        github: {
            enable: true,
            color: '#ffb3cc',
            url: 'https://github.com/cjyyx',
        },
        signature: {
            enable: true,
            contents: [
                "This theme is built with <b style='color:#ff6b81'>awescnb</b>.",
                "<b>console.log(ğŸº);</b>",
            ],
        },
        imagebox: {
            enable: false,
        },
        click: {
            enable: true,
            auto: false,
            colors: ['#FF1461', '#18FF92', '#5A87FF', '#FBF38C'],
            size: 10,
            maxCount: 30,
        },
        postSignature: {
            enable: false,
            enableLicense: false,
            licenseName: '',
            licenseLink: '',
        },

    }
    $.awesCnb(config)

    /* 
    å›¾ç‰‡å¤„ç†

    1. é¦–å…ˆç¼©å°ä¸ºåŸæ¥çš„ k1
    2. å¦‚æœå®½åº¦å¤§äºæ®µè½å®½åº¦çš„ k2ï¼Œåˆ™è®¾ç½®ä¸ºæ®µè½å®½åº¦çš„ k2
    
    */

    k1 = 0.75;
    k2 = 0.8;

    document.addEventListener("DOMContentLoaded", function () {
        setTimeout(function () {
            // è·å–idä¸ºcnblogs_post_bodyçš„div
            var postBody = document.getElementById('cnblogs_post_body');
            if (postBody) {
                // è·å–divå†…æ‰€æœ‰çš„imgå…ƒç´ 
                var images = postBody.getElementsByTagName('img');
                // éå†æ¯ä¸ªimgå…ƒç´ 
                for (var i = 0; i < images.length; i++) {
                    var img = images[i];

                    // ç¡®ä¿åœ¨å›¾ç‰‡åŠ è½½å®Œæˆåæ‰§è¡Œ
                    img.addEventListener('load', function () {
                        // è·å–å›¾ç‰‡çš„åŸå§‹å®½åº¦å’Œé«˜åº¦
                        var originalWidth = img.naturalWidth;
                        var originalHeight = img.naturalHeight;

                        // å°†å›¾ç‰‡ç¼©å°ä¸ºåŸæ¥çš„ k1
                        var newWidth = originalWidth * k1;
                        var newHeight = originalHeight * k1;

                        img.width = newWidth;
                        img.height = newHeight;

                        // è·å–ç¼©å°åçš„imgå®½åº¦å’Œçˆ¶æ®µè½çš„å®½åº¦
                        var parentParagraph = img.parentElement;
                        var parentWidth = parentParagraph.clientWidth;

                        // console.log('originalWidth:', originalWidth);
                        // console.log('newWidth:', newWidth);
                        // console.log('parentWidth:', parentWidth);


                        // åˆ¤æ–­ç¼©å°åçš„imgå®½åº¦æ˜¯å¦ä»ç„¶å¤§äºæ®µè½å®½åº¦çš„ k2
                        if (newWidth > parentWidth * k2) {
                            // console.log('resize');
                            // è®¾ç½®imgå®½åº¦ä¸ºæ®µè½å®½åº¦çš„ k2
                            img.style.width = k2 * 100 + '%';
                            img.style.height = 'auto';  // ä¿æŒçºµæ¨ªæ¯”
                        }
                    });

                    // å¦‚æœå›¾ç‰‡å·²ç»åŠ è½½ï¼Œåˆ™ç«‹å³è§¦å‘loadäº‹ä»¶å¤„ç†
                    if (img.complete) {
                        img.dispatchEvent(new Event('load'));
                    }
                }
            }
        }, 1000); // å»¶è¿Ÿ1ç§’æ‰§è¡Œ
    });



</script>